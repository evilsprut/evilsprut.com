---
title: –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π –≤ Sentry
date: '2019-01-25'
spoiler: –†–∞–∑–±–∏—Ä–∞–µ–º—Å—è –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ –≤ Sentry –∏ —Å–æ–±—Ä–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –¥–∞–Ω–Ω—ã–µ.
---

–û–¥–Ω–∞–∂–¥—ã –Ω–∞&nbsp;—Ä–∞–±–æ—Ç–µ —É&nbsp;–º–µ–Ω—è –≤–æ–∑–Ω–∏–∫–ª–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–æ–±—ã—Ç–∏—è, –ø—Ä–æ–∏—Å—Ö–æ–¥—è—â–∏–µ –Ω–∞&nbsp;—Å–∞–π—Ç–µ –æ–¥–Ω–æ–≥–æ –∏–∑&nbsp;–ø—Ä–æ–µ–∫—Ç–æ–≤. –¢–∞–∫ –∫–∞–∫ –≤—Å—è –ª–æ–≥–∏–∫–∞ –±—ã–ª–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –Ω–∞&nbsp;–∫–ª–∏–µ–Ω—Ç–µ, –¥–ª—è —ç—Ç–æ–π –∑–∞–¥–∞—á–∏ –±—ã–ª–æ —Ä–µ—à–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å [Sentry](https://sentry.io), –∫–æ—Ç–æ—Ä—ã–π —É–∂–µ –±—ã–ª –ø–æ–¥–∫–ª—é—á–µ–Ω –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫. –í&nbsp;—ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ —è&nbsp;—Ä–∞—Å—Å–∫–∞–∂—É –∫–∞–∫ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å.

> –ù–∞&nbsp;—Å–∞–º–æ–º –¥–µ–ª–µ, –≤&nbsp;[–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://docs.sentry.io/) –æ—á–µ–Ω—å –ø–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—Å–∞–Ω–æ, –∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤&nbsp;Sentry, –Ω–æ&nbsp;—Å&nbsp;–ø–µ—Ä–≤–æ–≥–æ –≤–∑–≥–ª—è–¥–∞ –æ–Ω–∞ –ø–æ–∫–∞–∑–∞–ª–∞—Å—å –º–Ω–µ –Ω–µ–æ—á–µ–≤–∏–¥–Ω–æ–π.

–ò—Ç–∞–∫, –ø–µ—Ä–≤–æ–µ —Å&nbsp;—á–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è, —ç—Ç–æ –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏ (scope). –û–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏ –Ω—É–∂–Ω–∞ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ–±—ã—Ç–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –º—ã&nbsp;–≤—ã–∑—ã–≤–∞–µ–º. –í–æ—Å–ø–æ–ª—å–∑—É–µ–º—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π `withScope` –∏&nbsp;–¥–ª—è –ø—Ä–∏–º–µ—Ä–∞ –ø–æ–º–µ—Ç–∏–º —Å–æ–±—ã—Ç–∏–µ —Ç–µ–≥–æ–º, –∞&nbsp;—Ç–∞–∫–∂–µ —É—Å—Ç–∞–Ω–æ–≤–∏–º –¥–ª—è –Ω–µ–≥–æ —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è ¬´warning¬ª.

```jsx
Sentry.withScope(scope => {
  scope.setTag("my-tag", "my value");
  scope.setLevel('warning');
  // ‚úÖ—Å–æ–±—ã—Ç–∏–µ –±—É–¥–µ—Ç –ø–æ–º–µ—á–µ–Ω–æ —Ç–µ–≥–æ–º my-tag
  Sentry.captureException(new Error('my error'));
});

// üî¥—Å–æ–±—ã—Ç–∏–µ –Ω–µ –±—É–¥–µ—Ç –ø–æ–º–µ—á–µ–Ω–æ —Ç–µ–≥–æ–º my-tag
Sentry.captureException(new Error('my other error'));
```

–¢–µ–ø–µ—Ä—å —Ä–∞–∑–±–µ—Ä—ë–º—Å—è —Å&nbsp;—Ç–µ–º, –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ.

–ù–∞–º –¥–æ—Å—Ç—É–ø–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ `captureException` –∏ `captureMessage`. –ü–µ—Ä–≤–∞—è –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –∑–∞—Ö–≤–∞—Ç–∞ –æ—à–∏–±–æ–∫. –ï—ë&nbsp;—É–¥–æ–±–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤&nbsp;–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ `try...catch`:

```jsx{4}
try {
    aFunctionThatMightFail();
} catch (err) {
    Sentry.captureException(err);
}
```

–í—Ç–æ—Ä–∞—è –ø—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏–µ —Å&nbsp;–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º:

```jsx
Sentry.captureMessage('Something went wrong');
```

–ù–æ&nbsp;—á—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –º—ã&nbsp;–≤–º–µ—Å—Ç–µ —Å&nbsp;—Å–æ–±—ã—Ç–∏–µ–º, –º—ã&nbsp;—Ö–æ—Ç–∏–º —Å–æ–±—Ä–∞—Ç—å –∫–∞–∫–∏–µ-—Ç–æ –¥–∞–Ω–Ω—ã–µ –∏&nbsp;–æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∏—Ö&nbsp;–≤&nbsp;Sentry? –£&nbsp;–Ω–∞—Å –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∫–∞–∫ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å.

**–•–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏ `addBreadcrumb`**

–ù–µ&nbsp;–∑–Ω–∞—é, –≤&nbsp;–∫–∞–∫–∏—Ö –∫–µ–π—Å–∞—Ö –∏—Ö&nbsp;–ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –Ω–æ&nbsp;Sentry –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤&nbsp;–Ω–∏—Ö —Å–æ–±—ã—Ç–∏—è, –∫–æ—Ç–æ—Ä—ã–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∏ –ø–µ—Ä–µ–¥ –≤—ã–±—Ä–æ—Å–æ–º –∏—Å–∫–ª—é—á–µ–Ω–∏—è. –ü–æ–ø—Ä–æ–±—É–µ–º –¥–æ–±–∞–≤–∏—Ç—å –∫&nbsp;—Å–æ–±—ã—Ç–∏—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ&nbsp;–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ:

```jsx
scope.addBreadcrumb({
  category: 'auth',
  message: 'Authenticated user ' + user.email,
  level: 'info'
});
```

–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å [–≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://docs.sentry.io/enriching-error-data/breadcrumbs/?platform=javascript). –í&nbsp;Sentry —Ö–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏ –≤—ã–≥–ª—è–¥—è—Ç –≤–æ—Ç —Ç–∞–∫:

![Sentry breadcrunbs](./sentry-breadcrumbs.png)

**–¢–µ–≥–∏ `setTag`**

–•–æ—Ä–æ—à–∏ —Ç–µ–º, —á—Ç–æ –≤&nbsp;Sentry –ø–æ&nbsp;–Ω–∏–º –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø–æ–∏—Å–∫. –û—á–µ–Ω—å —É–¥–æ–±–Ω–æ, –∫–æ–≥–¥–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞–π—Ç–∏ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ —Å—Ä–µ–¥–∏ —Å–æ—Ç–µ–Ω –∏–ª–∏ –¥–∞–∂–µ —Ç—ã—Å—è—á –ø–æ—Ö–æ–∂–∏—Ö. –¢–µ–≥–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤&nbsp;—Ñ–æ—Ä–º–∞—Ç–µ –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ:

```jsx
scope.setTag('key', 'value');
```

Sentry –Ω–∞&nbsp;–æ—Å–Ω–æ–≤–µ —Ç–µ–≥–æ–≤ —Å—Ç—Ä–æ–∏—Ç –¥–∏–∞–≥—Ä–∞–º–º—ã, –ø–æ&nbsp;–∫–æ—Ç–æ—Ä—ã–º –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–±—ã—Ç–∏–π –ø—Ä–∏—à–ª–æ —Å&nbsp;—Ç–µ–º –∏–ª–∏ –∏–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º —Ç–µ–≥–∞:

![Sentry tags chart](./sentry-tags-chart.png)

–ê&nbsp;—Ç–∞–∫–∂–µ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–µ–≥–∏ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è –≤&nbsp;–≤–∏–¥–µ —Å–ø–∏—Å–∫–∞:

![Sentry tags](./sentry-tags.png)

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ `setExtra`** 

–°–ø–æ—Å–æ–± –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥–æ–π–¥—ë—Ç –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö. –ü—Ä–∏–º–µ—á–∞—Ç–µ–ª–µ–Ω —Ç–µ–º, —á—Ç–æ –µ—Å–ª–∏ –≤ `setExtra` –ø–µ—Ä–µ–¥–∞—Ç—å –æ–±—ä–µ–∫—Ç, —Ç–æ&nbsp;–≤&nbsp;Sentry –æ–Ω&nbsp;–æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è —Å&nbsp;—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏&nbsp;–ø–æ–¥—Å–≤–µ—Ç–∫–æ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞. –î–∞–Ω–Ω—ã–µ –Ω–µ&nbsp;–∏–Ω–¥–µ–∫—Å–∏—Ä—É—é—Ç—Å—è, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –ø–æ&nbsp;–Ω–∏–º –Ω–µ–ª—å–∑—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–∏—Å–∫:

```jsx
scope.setExtra('name', data);
```

–í&nbsp;Sentry –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

![Sentry additional data](./sentry-additional-data.png)

------

–¢–µ–ø–µ—Ä—å –ø–æ–ø—Ä–æ–±—É–µ–º —Å–æ–±—Ä–∞—Ç—å –≤—Å—ë –≤–º–µ—Å—Ç–µ –∏&nbsp;–æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ –≤&nbsp;Sentry:

```jsx
import * as Sentry from '@sentry/browser';

Sentry.withScope((scope) => {
  scope.setLevel('debug');
  scope.setTag('key', 'value');
  scope.setExtra('name', { data: null });
  Sentry.captureMessage('Test');
});
```

–í–æ—Ç –∏&nbsp;–≤—Å—ë. –≠—Ç–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã —Å&nbsp;—Å–æ–±—ã—Ç–∏—è–º–∏ –≤&nbsp;Sentry. –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π —á–∏—Ç–∞–π—Ç–µ&nbsp;–≤ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://docs.sentry.io/).

**UPD:** –û–ø—ã—Ç–Ω—ã–º –ø—É—Ç—ë–º –≤—ã—è—Å–Ω–∏–ª–∏, —á—Ç–æ –≤ Sentry –ø–æ –∫–∞–∫–∏–º-—Ç–æ –ø—Ä–∏—á–∏–Ω–∞–º –ø–æ–ø–∞–¥–∞—é—Ç –Ω–µ –≤—Å–µ —Å–æ–±—ã—Ç–∏—è. –î–ª—è —Ç–µ—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –ø—Ä–æ—Å—Ç—É—é —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ JSON-—ã —Å –¥–∞–Ω–Ω—ã–º–∏ –Ω–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –±–µ–∫ –∏ –≤ Sentry –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ. –ù–µ–∫–æ—Ç–æ—Ä–æ–π —á–∞—Å—Ç–∏ –∏–≤–µ–Ω—Ç–æ–≤ –≤ Sentry –ø—Ä–æ—Å—Ç–æ –Ω–µ –±—ã–ª–æ. **–ë—É–¥—å—Ç–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω—ã!**